{% extends "pages/base.html" %}

{% block title %}Sam Osian{% endblock %}
{% block meta_description %}{{ about_preview|truncatechars:160 }}{% endblock %}
{% block og_title %}Sam Osian | Health Data Scientist{% endblock %}
{% block og_description %}{{ about_preview|truncatechars:200 }}{% endblock %}
{% block twitter_title %}Sam Osian | Health Data Scientist{% endblock %}
{% block twitter_description %}{{ about_preview|truncatechars:200 }}{% endblock %}
{% block body_class %}site-body home-page{% endblock %}

{% block content %}
  <section class="hero-panel panel js-tilt" data-reveal>
    <h1 class="hero-title">
      <span class="hero-line">
        {{ hero_config.intro_line|default:"Hi, I'm" }}
        <span class="inline-avatar-wrap">
          <img class="inline-avatar" src="/static/assets/me-circle.png" alt="Portrait of Sam Osian" />
        </span>
        {{ hero_config.name|default:"Sam Osian" }}!
      </span>
      <span class="hero-line hero-line-muted">{{ hero_config.role_line|default:"I'm a Data Scientist at" }}</span>
      <span class="hero-line">
        <span class="hero-line-accent">{{ hero_config.org_emphasis|default:"University of Liverpool" }}</span>
        <span class="hero-line-muted-inline"> {{ hero_config.org_suffix_muted|default:"and the" }}</span>
        <span class="hero-line-accent"> {{ hero_config.org_suffix_accent|default:"NHS" }}</span><span class="hero-line-muted-inline">.</span>
      </span>
    </h1>

    <div class="availability-pill" aria-label="Availability status">
      <span class="availability-dot" aria-hidden="true"></span>
      {{ hero_config.availability_label|default:"Open to collaboration" }}
    </div>

    <div class="hero-cta-row">
      <button class="cta-primary js-magnetic" type="button" data-contact-open aria-label="Open contact form">
        <span>Get in touch</span>
      </button>
      <p>{{ hero_config.support_copy|default:"Feel free to explore my work and reach out — I'd love to chat :)" }}</p>
    </div>
  </section>

  <section class="home-grid">
    <article class="panel experience-panel js-tilt" data-reveal>
      <span class="panel-chip">My experience</span>
      <ol class="timeline-list {% if cv_suggest_prior %}timeline-list--suggestive{% endif %}">
        {% for entry in cv_entries %}
          <li>
            <span class="timeline-year">{{ entry.period }}</span>
            <strong>{{ entry.role }}</strong>
            <span>{{ entry.organisation }}{% if entry.context %} · {{ entry.context }}{% endif %}</span>
          </li>
        {% empty %}
          <li>
            <span class="timeline-year">Career timeline</span>
            <strong>No CV entries configured yet</strong>
            <span>Add entries in <code>django_site/content/cv.md</code>.</span>
          </li>
        {% endfor %}
      </ol>
      <div class="panel-cta-row">
        <a href="/cv/" class="panel-cta-link">
          <span>See CV</span>
          <i class="hgi hgi-stroke hgi-arrow-right-01" aria-hidden="true"></i>
        </a>
      </div>
    </article>

    <article class="panel posts-panel js-tilt" data-reveal>
      <span class="panel-chip">Featured post</span>
      {% if featured_post %}
        <div class="posts-layout">
          <section class="posts-featured">
            {% if featured_post.cover_image_url %}
              <a class="featured-media" href="{{ featured_post.url }}">
                <img src="{{ featured_post.cover_image_url }}" alt="Preview image for {{ featured_post.title }}" />
              </a>
            {% else %}
              <a class="featured-media featured-media-fallback" href="{{ featured_post.url }}">
                <span>Article preview</span>
              </a>
            {% endif %}
            <h2><a href="{{ featured_post.url }}">{{ featured_post.title }}</a></h2>
            <p>{{ featured_post.summary_html|striptags|truncatechars:220 }}</p>
            <div class="panel-meta-row">
              {% if featured_post.date %}
                <span>{{ featured_post.date|date:"F j, Y" }}</span>
              {% endif %}
            </div>
            <a class="post-read-btn" href="{{ featured_post.url }}">
              <span>Read post</span>
              <i class="hgi hgi-stroke hgi-arrow-right-01" aria-hidden="true"></i>
            </a>
          </section>

          <section class="posts-recent">
            <h3>Recent posts</h3>
            {% if recent_posts %}
              <ol class="recent-list">
                {% for post in recent_posts %}
                  <li>
                    <span class="recent-num">0{{ forloop.counter }}</span>
                    <div>
                      <a href="{{ post.url }}">{{ post.title }}</a>
                      {% if post.date %}
                        <p>{{ post.date|date:"M j, Y" }}</p>
                      {% endif %}
                    </div>
                  </li>
                {% endfor %}
              </ol>
            {% else %}
              <p>No published posts yet.</p>
            {% endif %}
          </section>
        </div>
      {% else %}
        <p>No featured article configured yet.</p>
      {% endif %}
    </article>

    <article class="panel about-panel js-tilt" data-reveal>
      <span class="panel-chip">About</span>
      <h3>Interdisciplinary by design</h3>
      <p>{{ about_preview }}</p>

      <p class="about-panel-followup">I work at the intersection of healthcare, statistics, and AI to turn evidence into tools that can be used in practice.</p>
      <div class="about-actions">
        <a href="/about/">
          <span>Read full background</span>
          <i class="hgi hgi-stroke hgi-arrow-right-01" aria-hidden="true"></i>
        </a>
      </div>
    </article>

    <article class="panel location-panel js-tilt" data-reveal>
      <span class="panel-chip">Location</span>
      <div class="map-art">
        <img src="/static/assets/images/liverpool.png" alt="Liverpool city view" />
      </div>
      <p class="location-name">LIVERPOOL</p>
      <p class="location-sub">UNITED KINGDOM · REMOTE FRIENDLY</p>
    </article>

    <article class="panel contact-panel" data-reveal>
      <span class="panel-chip">Contact</span>
      <button
        type="button"
        class="contact-launch-btn"
        aria-label="Open contact form"
        data-contact-open
      >
        <i class="hgi hgi-stroke hgi-message-01 contact-message-icon" aria-hidden="true"></i>
      </button>
      <p class="contact-panel-copy">Get in touch</p>
    </article>

    <article class="panel publications-panel coming-soon-panel js-tilt" data-reveal>
      <span class="panel-chip">Publications</span>
      <h3>Content in preparation.</h3>
      <p>This section is still being prepared.</p>
    </article>

    <article class="panel portfolio-panel coming-soon-panel js-tilt" data-reveal>
      <span class="panel-chip">Portfolio</span>
      <h3>Content in preparation.</h3>
      <p>This section is still being prepared.</p>
    </article>

    <div
      class="contact-modal"
      data-contact-modal
      {% if contact_status == "success" or contact_status == "validation_error" or contact_status == "send_error" %}data-contact-open-on-load{% endif %}
      hidden
    >
      <div class="contact-modal-backdrop" data-contact-close></div>
      <div class="contact-modal-dialog" role="dialog" aria-modal="true" aria-labelledby="contact-modal-title">
        <div class="contact-modal-head">
          <h3 id="contact-modal-title">Send a message</h3>
          <button type="button" class="contact-modal-close" aria-label="Close contact form" data-contact-close>
            <i class="hgi hgi-stroke hgi-cancel-01" aria-hidden="true"></i>
          </button>
        </div>
        <p class="contact-modal-intro">If you have a question, collaboration idea, or speaking opportunity, I’d be glad to hear from you.</p>

        {% if contact_status == "success" %}
          <div class="contact-success-state">
            <p class="contact-feedback contact-feedback-success">Thanks. Your message has been sent.</p>
          </div>
        {% else %}
          {% if contact_status == "send_error" %}
            <p class="contact-feedback contact-feedback-error">Sorry, there was a delivery issue. Please try again shortly.</p>
          {% endif %}

          <form method="post" action="{% url 'home' %}" class="contact-form">
            {% csrf_token %}
            <input type="hidden" name="form_name" value="contact" />
            <div aria-hidden="true" style="position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden;">
              <label for="company_website">Company website</label>
              <input type="text" id="company_website" name="company_website" tabindex="-1" autocomplete="off" />
            </div>

            <p class="contact-required-note">All fields are required.</p>

            <label for="{{ contact_form.name.id_for_label }}">Name <span class="contact-required-mark" aria-hidden="true">*</span></label>
            {{ contact_form.name }}
            {% if contact_form.name.errors %}
              <p class="contact-field-error">{{ contact_form.name.errors|striptags }}</p>
            {% endif %}

            <label for="{{ contact_form.email.id_for_label }}">Email <span class="contact-required-mark" aria-hidden="true">*</span></label>
            {{ contact_form.email }}
            {% if contact_form.email.errors %}
              <p class="contact-field-error">{{ contact_form.email.errors|striptags }}</p>
            {% endif %}

            <label for="{{ contact_form.message.id_for_label }}">Message <span class="contact-required-mark" aria-hidden="true">*</span></label>
            {{ contact_form.message }}
            {% if contact_form.message.errors %}
              <p class="contact-field-error">{{ contact_form.message.errors|striptags }}</p>
            {% endif %}

            <button type="submit" class="contact-submit-btn">
              <span>Send message</span>
              <i class="hgi hgi-stroke hgi-arrow-right-01" aria-hidden="true"></i>
            </button>
          </form>
        {% endif %}
      </div>
    </div>
  </section>
{% endblock %}
